# å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ

åŸºäº Node.js çš„å‰åç«¯åˆ†ç¦»å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿï¼Œé‡‡ç”¨ç°ä»£åŒ–çš„ Web å¼€å‘æŠ€æœ¯æ ˆæ„å»ºã€‚æœ¬é¡¹ç›®æ˜¯ Node.js å’Œ npm æœ€ä½³å®è·µçš„æ•™å­¦ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å®Œæ•´çš„å…¨æ ˆå¼€å‘æµç¨‹ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå›¾ä¹¦çš„å¢åˆ æ”¹æŸ¥ã€å€Ÿé˜…ç®¡ç†ã€å½’è¿˜ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚ç³»ç»Ÿé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œåç«¯æä¾› RESTful APIï¼Œå‰ç«¯ä½¿ç”¨ Layui æ¡†æ¶æ„å»ºç°ä»£åŒ–çš„ç®¡ç†ç•Œé¢ã€‚

### ğŸ¯ ä¸»è¦åŠŸèƒ½

- **å›¾ä¹¦ç®¡ç†**
  - å›¾ä¹¦ä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥
  - å›¾ä¹¦æœç´¢ï¼ˆæ”¯æŒä¹¦åã€ä½œè€…ã€ISBNï¼‰
  - å›¾ä¹¦åˆ†ç±»ç®¡ç†
  - åˆ†é¡µæ˜¾ç¤º

- **å€Ÿé˜…ç®¡ç†**
  - å›¾ä¹¦å€Ÿé˜…ç™»è®°
  - å€Ÿé˜…è®°å½•æŸ¥è¯¢
  - å›¾ä¹¦å½’è¿˜å¤„ç†
  - å€Ÿé˜…çŠ¶æ€ç­›é€‰

## ğŸ›  æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **Node.js** - JavaScript è¿è¡Œç¯å¢ƒ
- **Express** - Web åº”ç”¨æ¡†æ¶
- **SQLite3** - è½»é‡çº§æ•°æ®åº“
- **CORS** - è·¨åŸŸèµ„æºå…±äº«ä¸­é—´ä»¶
- **Body-parser** - è¯·æ±‚ä½“è§£æä¸­é—´ä»¶

### å‰ç«¯æŠ€æœ¯
- **Layui** - ç°ä»£åŒ– UI æ¡†æ¶
- **jQuery** - JavaScript åº“
- **HTML5 & CSS3** - é¡µé¢ç»“æ„å’Œæ ·å¼

### å¼€å‘å·¥å…·
- **nodemon** - å¼€å‘ç¯å¢ƒè‡ªåŠ¨é‡å¯å·¥å…·
- **ESLint** - ä»£ç è´¨é‡æ£€æŸ¥å·¥å…·

## ğŸ“ é¡¹ç›®ç»“æ„

```
booklib/
â”œâ”€â”€ backend/                    # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/                   # æºä»£ç ç›®å½•
â”‚   â”‚   â”œâ”€â”€ config/           # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ database.js   # æ•°æ®åº“è¿æ¥é…ç½®
â”‚   â”‚   â”œâ”€â”€ controllers/      # æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ bookController.js    # å›¾ä¹¦æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â””â”€â”€ borrowController.js  # å€Ÿé˜…æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ routes/           # è·¯ç”±å®šä¹‰
â”‚   â”‚       â”œâ”€â”€ bookRoutes.js    # å›¾ä¹¦è·¯ç”±
â”‚   â”‚       â””â”€â”€ borrowRoutes.js  # å€Ÿé˜…è·¯ç”±
â”‚   â”œâ”€â”€ database/             # æ•°æ®åº“æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ booklibrary.db   # SQLite æ•°æ®åº“æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ init.js          # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ package.json         # åç«¯ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ server.js           # æœåŠ¡å™¨å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ test.http           # API æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ frontend/               # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ css/               # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ style.css
â”‚   â”œâ”€â”€ js/                # JavaScript æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ app.js        # ä¸»åº”ç”¨é€»è¾‘
â”‚   â”‚   â””â”€â”€ config.js     # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ lib/              # ç¬¬ä¸‰æ–¹åº“
â”‚   â”‚   â”œâ”€â”€ jquery/       # jQuery åº“
â”‚   â”‚   â””â”€â”€ layui/        # Layui æ¡†æ¶
â”‚   â”œâ”€â”€ index.html        # ä¸»é¡µé¢
â”‚   â””â”€â”€ package.json      # å‰ç«¯ä¾èµ–é…ç½®
â”œâ”€â”€ .eslintrc.json        # ESLint é…ç½®
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 14.0.0
- npm >= 6.0.0

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone <repository-url>
   cd booklib
   ```

2. **å®‰è£…åç«¯ä¾èµ–**
   ```bash
   cd backend
   npm install
   ```

3. **åˆå§‹åŒ–æ•°æ®åº“**
   ```bash
   node database/init.js
   ```

4. **å®‰è£…å‰ç«¯ä¾èµ–**
   ```bash
   cd ../frontend
   npm install
   ```

### è¿è¡Œé¡¹ç›®

1. **å¯åŠ¨åç«¯æœåŠ¡**
   ```bash
   cd backend
   npm run dev
   ```
   æœåŠ¡å™¨å°†åœ¨ http://localhost:3000 å¯åŠ¨

2. **å¯åŠ¨å‰ç«¯æœåŠ¡**
   
   ä½¿ç”¨ VS Code çš„ Live Server æ‰©å±•ï¼š
   - å³é”®ç‚¹å‡» `frontend/index.html`
   - é€‰æ‹© "Open with Live Server"
   
   æˆ–ä½¿ç”¨å…¶ä»–é™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼Œå‰ç«¯å°†åœ¨ http://localhost:5500 å¯åŠ¨

## ğŸ“š API æ–‡æ¡£

### å›¾ä¹¦ç®¡ç† API

| æ–¹æ³• | è·¯å¾„ | æè¿° | å‚æ•° |
|------|------|------|------|
| GET | `/api/books` | è·å–å›¾ä¹¦åˆ—è¡¨ | `page`, `limit`, `search` |
| GET | `/api/books/:id` | è·å–å•æœ¬å›¾ä¹¦è¯¦æƒ… | `id` |
| POST | `/api/books` | æ·»åŠ æ–°å›¾ä¹¦ | `isbn`, `title`, `author`, `publisher`, `publish_date`, `category` |
| PUT | `/api/books/:id` | æ›´æ–°å›¾ä¹¦ä¿¡æ¯ | `id`, `title`, `author`, `publisher`, `publish_date`, `category` |
| DELETE | `/api/books/:id` | åˆ é™¤å›¾ä¹¦ | `id` |

### å€Ÿé˜…ç®¡ç† API

| æ–¹æ³• | è·¯å¾„ | æè¿° | å‚æ•° |
|------|------|------|------|
| POST | `/api/borrow/borrow` | å€Ÿé˜…å›¾ä¹¦ | `book_id`, `borrower_name`, `borrower_phone` |
| PUT | `/api/borrow/return/:id` | å½’è¿˜å›¾ä¹¦ | `id` |
| GET | `/api/borrow/records` | è·å–å€Ÿé˜…è®°å½• | `page`, `limit`, `status` |

### API å“åº”æ ¼å¼

```json
{
  "code": 0,
  "msg": "success",
  "data": {},
  "count": 100
}
```

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### å›¾ä¹¦è¡¨ (books)
- `id` - ä¸»é”®ï¼Œè‡ªå¢
- `isbn` - ISBNå·ï¼Œå”¯ä¸€
- `title` - ä¹¦å
- `author` - ä½œè€…
- `publisher` - å‡ºç‰ˆç¤¾
- `publish_date` - å‡ºç‰ˆæ—¥æœŸ
- `category` - åˆ†ç±»
- `status` - çŠ¶æ€ (available/borrowed)
- `created_at` - åˆ›å»ºæ—¶é—´
- `updated_at` - æ›´æ–°æ—¶é—´

### å€Ÿé˜…è®°å½•è¡¨ (borrow_records)
- `id` - ä¸»é”®ï¼Œè‡ªå¢
- `book_id` - å›¾ä¹¦IDï¼Œå¤–é”®
- `borrower_name` - å€Ÿé˜…äººå§“å
- `borrower_phone` - å€Ÿé˜…äººç”µè¯
- `borrow_date` - å€Ÿé˜…æ—¥æœŸ
- `return_date` - å½’è¿˜æ—¥æœŸ
- `status` - çŠ¶æ€ (borrowing/returned)
- `created_at` - åˆ›å»ºæ—¶é—´

## ğŸ§ª æµ‹è¯•

ä½¿ç”¨ VS Code çš„ REST Client æ‰©å±•ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œ `backend/test.http` æ–‡ä»¶ä¸­çš„ API æµ‹è¯•ç”¨ä¾‹ã€‚

```http
### è·å–æ‰€æœ‰å›¾ä¹¦
GET http://localhost:3000/api/books

### æ·»åŠ æ–°å›¾ä¹¦
POST http://localhost:3000/api/books
Content-Type: application/json

{
    "isbn": "9787121234567",
    "title": "Vue.jså®æˆ˜",
    "author": "å¼ ä¸‰",
    "publisher": "ç”µå­å·¥ä¸šå‡ºç‰ˆç¤¾",
    "publish_date": "2023-01-01",
    "category": "ç¼–ç¨‹"
}
```

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼
é¡¹ç›®ä½¿ç”¨ ESLint è¿›è¡Œä»£ç è´¨é‡æ£€æŸ¥ï¼Œé…ç½®æ–‡ä»¶ä¸º `.eslintrc.json`ã€‚

### Git æäº¤è§„èŒƒ
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤é—®é¢˜
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´
- `refactor`: ä»£ç é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
- `PORT` - æœåŠ¡å™¨ç«¯å£å·ï¼Œé»˜è®¤ 3000

### æ•°æ®åº“é…ç½®
æ•°æ®åº“æ–‡ä»¶ä½äº `backend/database/booklibrary.db`ï¼Œå¦‚éœ€é‡æ–°åˆå§‹åŒ–ï¼š
```bash
cd backend
node database/init.js
```

## ğŸ“– å­¦ä¹ èµ„æº

æœ¬é¡¹ç›®æ˜¯ Node.js å’Œ npm æœ€ä½³å®è·µçš„æ•™å­¦ç¤ºä¾‹ï¼Œè¯¦ç»†çš„å¼€å‘è¿‡ç¨‹å’Œæœ€ä½³å®è·µè¯´æ˜è¯·å‚è€ƒï¼š
- [Node.js å’Œ npm æœ€ä½³å®è·µ - å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ.md](./Node.js%20å’Œ%20npm%20æœ€ä½³å®è·µ%20-%20å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ.md)

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issue æˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªæ•™å­¦é¡¹ç›®ï¼Œä¸»è¦ç”¨äºå­¦ä¹  Node.js å…¨æ ˆå¼€å‘ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å‰ï¼Œè¯·ç¡®ä¿æ·»åŠ é€‚å½“çš„å®‰å…¨æªæ–½å’Œé”™è¯¯å¤„ç†ã€‚